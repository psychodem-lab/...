<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo HTML/CSS/JS</title>
    <style>
        /* Proste style CSS dla planszy Bingo */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            background-color: #f0f0f0;
        }

        #bingo-board {
            display: grid;
            grid-template-columns: repeat(5, 80px); /* 5 kolumn, ka偶da 80px szerokoci */
            grid-template-rows: repeat(5, 80px); /* 5 wierszy, ka偶dy 80px wysokoci */
            border: 4px solid #333;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            background-color: #fff;
        }

        .cell {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            border: 1px solid #ccc;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            user-select: none; /* Zapobiega zaznaczaniu tekstu */
        }

        .cell:hover:not(.marked) {
            background-color: #e0e0e0;
        }

        .cell.marked {
            background-color: #4CAF50; /* Zielone to dla zaznaczonego pola */
            color: white;
            border-color: #4CAF50;
            position: relative;
        }
        
        /* Styl dla zaznaczenia na polu */
        .cell.marked::after {
            content: 'X';
            position: absolute;
            font-size: 40px;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1;
        }

        .cell:nth-child(13) { /* 13 pole to rodek (0-indeksowane: 12) */
            background-color: #f0ad4e;
            color: white;
        }
        
        #message {
            margin-top: 20px;
            font-size: 28px;
            font-weight: bold;
            color: #d9534f;
            min-height: 30px; /* Aby wiadomo nie 'skakaa' */
        }
        
        #header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        #header h1 {
            color: #333;
        }
        
        .header-cell {
            background-color: #5cb85c;
            color: white;
            font-size: 18px;
            padding: 5px;
            text-align: center;
            border: 1px solid #333;
        }
        
        #new-game {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.2s;
        }

        #new-game:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <div id="header">
        <h1>Gra w Bingo</h1>
    </div>

    <div id="bingo-board-container">
        <div id="bingo-header" style="display: grid; grid-template-columns: repeat(5, 80px);">
            <div class="header-cell">B</div>
            <div class="header-cell">I</div>
            <div class="header-cell">N</div>
            <div class="header-cell">G</div>
            <div class="header-cell">O</div>
        </div>
        <div id="bingo-board"></div>
    </div>
    
    <div id="message"></div>
    
    <button id="new-game" onclick="startGame()">Nowa Gra</button>

    <script>
        const BOARD_SIZE = 5; // Plansza 5x5
        const NUMBER_RANGE_MAX = 75; // Liczby od 1 do 75
        const boardElement = document.getElementById('bingo-board');
        const messageElement = document.getElementById('message');
        let isGameOver = false;

        // --- Generowanie planszy ---

        function generateUniqueNumbers() {
            // Potrzebujemy 25 p贸l, ale rodkowe jest "Free", wic 24 unikalne liczby
            const neededNumbers = (BOARD_SIZE * BOARD_SIZE) - 1;
            const numbers = [];
            const allNumbers = Array.from({length: NUMBER_RANGE_MAX}, (_, i) => i + 1); // [1, 2, ..., 75]
            
            // Prosty algorytm tasujcy i pobierajcy pierwsze n liczb
            for (let i = allNumbers.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [allNumbers[i], allNumbers[j]] = [allNumbers[j], allNumbers[i]]; // Zamiana miejsc
            }
            
            const selectedNumbers = allNumbers.slice(0, neededNumbers);
            
            // Wstawienie "Free" w rodku planszy (indeks 12 dla planszy 5x5)
            const middleIndex = Math.floor(BOARD_SIZE * BOARD_SIZE / 2);
            selectedNumbers.splice(middleIndex, 0, "Free");

            return selectedNumbers;
        }

        function renderBoard(numbers) {
            boardElement.innerHTML = ''; // Wyczy poprzedni plansz
            
            numbers.forEach((number, index) => {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.textContent = number;
                cell.dataset.value = number;
                cell.dataset.index = index;
                
                // Automatyczne zaznaczenie pola "Free" i nadanie mu klasy 'marked'
                if (number === "Free") {
                    cell.classList.add('marked');
                    cell.dataset.marked = 'true';
                }

                cell.addEventListener('click', handleCellClick);
                boardElement.appendChild(cell);
            });
        }
        
        // --- Logika gry ---

        function handleCellClick(event) {
            if (isGameOver) return;
            
            const cell = event.target;
            
            // Nie mo偶na odznaczy pola "Free"
            if (cell.dataset.value === "Free") return;

            // Przeczanie stanu zaznaczenia
            const isMarked = cell.classList.toggle('marked');
            cell.dataset.marked = isMarked ? 'true' : 'false';

            // Sprawdzenie warunk贸w zwycistwa
            checkForWin();
        }

        function checkForWin() {
            const cells = Array.from(boardElement.children);
            const markedMatrix = [];
            
            // Utw贸rz macierz 5x5 stan贸w zaznaczenia (true/false)
            for (let i = 0; i < BOARD_SIZE; i++) {
                markedMatrix[i] = [];
                for (let j = 0; j < BOARD_SIZE; j++) {
                    const index = i * BOARD_SIZE + j;
                    markedMatrix[i][j] = cells[index].classList.contains('marked');
                }
            }
            
            // 1. Sprawdzenie wierszy i kolumn
            for (let i = 0; i < BOARD_SIZE; i++) {
                // Wiersze (poziome)
                if (markedMatrix[i].every(val => val)) {
                    declareWinner();
                    return;
                }
                
                // Kolumny (pionowe)
                let columnWin = true;
                for (let j = 0; j < BOARD_SIZE; j++) {
                    if (!markedMatrix[j][i]) {
                        columnWin = false;
                        break;
                    }
                }
                if (columnWin) {
                    declareWinner();
                    return;
                }
            }
            
            // 2. Sprawdzenie przektnych
            let diag1Win = true; // G贸wna przektna (od lewej g贸rnej)
            let diag2Win = true; // Antyprzektna (od prawej g贸rnej)
            for (let i = 0; i < BOARD_SIZE; i++) {
                if (!markedMatrix[i][i]) { // G贸wna
                    diag1Win = false;
                }
                if (!markedMatrix[i][BOARD_SIZE - 1 - i]) { // Antyprzektna
                    diag2Win = false;
                }
            }
            
            if (diag1Win || diag2Win) {
                declareWinner();
            }
        }
        
        function declareWinner() {
            isGameOver = true;
            messageElement.textContent = "コ BINGO! Wygrae!";
            // Mo偶na doda np. animacj lub zmian styl贸w dla wygranych p贸l
        }
        
        // --- Inicjalizacja ---

        function startGame() {
            messageElement.textContent = "";
            isGameOver = false;
            const newNumbers = generateUniqueNumbers();
            renderBoard(newNumbers);
        }

        // Uruchomienie gry po zaadowaniu strony
        window.onload = startGame;
    </script>

</body>
</html>
